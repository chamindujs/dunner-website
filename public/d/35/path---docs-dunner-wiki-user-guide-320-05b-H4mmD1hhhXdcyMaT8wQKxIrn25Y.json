{"data":{"site":{"siteMetadata":{"title":"Dunner","docsLocation":"https://github.com/leopardslab/dunner/wiki"}},"mdx":{"fields":{"id":"2b5c59d5-c910-5422-902d-77b58c6b0198","title":"User Guide","slug":"/docs/dunner.wiki/user-guide"},"code":{"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", null, \"Getting started\"), mdx(\"p\", null, \"This document describes the usage instructions of the current stable version of Dunner.\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Install Dunner by following one of the methods present in the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/leopardslab/dunner/wiki/Installation-Guide\"\n  }), \"Installation Guide\"), \".\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Create a YAML file \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".dunner.yaml\"), \" in your project directory.\\nIt could look like as follows, \"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"```yaml\\npublish:\\n  - image: node\\n    commands:\\n      - [\\\"node\\\", \\\"--version\\\"]\\n  - image: node\\n    commands:\\n      - [\\\"npm\\\", \\\"install\\\"]\\n  - image: mvn\\n    commands:\\n      - [\\\"mvn\\\", \\\"package\\\"]\\n```\\nHave a look at [__How to write a Dunner file?__](#how-to-write-a-dunner-file) to know about more complex examples of creating tasks for Dunner.\\n\"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Now you can run a task with Dunner as follows,\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"$ dunner do publish\\n\")), mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"NOTE\"), \": If you have created a YAML file with a different name, pass a flag \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"-t\"), \" with filename as the argument. Example,\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"$ dunner do publish -t task.yml\\n\")))), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"NOTE\"), \": Your source code will be mounted to a directory called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/dunner\"), \" in the task containers and will be the working directory by default. If you want to change the working directory of the container, define it in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"dir\"), \" field of that corresponding step.\"), mdx(\"hr\", null), mdx(\"h1\", null, \"How to write a Dunner file\"), mdx(\"h2\", null, \"Step Fields Reference\"), mdx(\"p\", null, \"Step fields are all the keys that are to be defined to describe a step of the tasks in the dunner file so that it can be parsed and interpreted by Dunner to execute certain commands inside a docker container.\"), mdx(\"table\", null, mdx(\"thead\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"thead\"\n  }, mdx(\"th\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"center\"\n  }), \"Field\"), mdx(\"th\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"Description\"))), mdx(\"tbody\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"center\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"name\")), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"Name of the step that is being run here. It can be any alphanumeric string that is used for identification purpose only.\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"center\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"image\")), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"Image name or repository digest that has to be pulled from a registry. It is same as the first argument passed to the \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"docker pull\"), \" command while pulling an image.\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"center\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"commands\")), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"List of commands that has to be run inside the container built from the mentioned image or repository.\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"center\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"envs\")), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"List of environment variables and their corresponding values that has to be exported inside the container.\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"center\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"dir\")), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"To define the default working directory of dunner container where the current directory will be mounted. If no value is passed, working directory is set as \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"/dunner\"), \" by default.\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"center\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"mounts\")), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"List of directories that are to be mounted on the container.\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"center\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"follow\")), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"Name of some other task that has to be executed as step for this task.\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"center\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"args\")), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"List of arguments to be passed to the task mentioned in the 'follow' field, which otherwise are passed through the command-line interface.\")))), mdx(\"h2\", null, \"Multiple commands\"), mdx(\"p\", null, \"Since each step of the task is being executed inside the a different container, it is possible to run multiple commands inside a single step if there is a case of dependency of subsequent commands.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Example\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yaml\"\n  }), \"build:\\n  - name: Setup\\n    image: node:latest\\n    commands:\\n      - [\\\"npm\\\", \\\"--version\\\"]\\n      - [\\\"npm\\\", \\\"install\\\"]\\n\")), mdx(\"h2\", null, \"Mounting external directories\"), mdx(\"p\", null, \"It should be noted that there are two permission levels on which a directory can be mounted, viz., \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Read-Only\"), \" and \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Read-Write\"), \". The syntax for a directory mount is \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<src>:<dest>:<mode>\"), \". Where \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<src>\"), \" is the path of directory present on the host; \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<dest>\"), \" is the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"absolute\"), \" path where the directory has to be mounted on the container; \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<mode>\"), \" is either \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"strong\"\n  }, \"r\")), \" or \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"strong\"\n  }, \"w\")), \" for \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Read-Only\"), \" and \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Read-Write\"), \" permission level, respectively.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Example\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yaml\"\n  }), \"build:\\n  - name: Hosting\\n    image: php:apache\\n    commands:\\n      - [\\\"service\\\", \\\"apache2\\\", \\\"restart\\\"]\\n    mounts:\\n      - ~/project/backend/src:/var/www:r\\n      - ~/project/media:/var/www/media:w\\n\")), mdx(\"h2\", null, \"Exporting environment variables\"), mdx(\"p\", null, \"Environment variables need to be explicitly defined which are to be exported in the containers. Those can also be fetched from host environment variables, or values can be defined in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".env\"), \" file. More in \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"#dotenv-file\"\n  }), \"Dotenv file\"), \" section.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Example\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yaml\"\n  }), \"static:\\n  - name: handle_static\\n    image: python3\\n    commands:\\n      - [\\\"django-admin\\\", \\\"collectstatic\\\"]\\n    envs:\\n      - DJANGO_SETTINGS_MODULE=mysite.settings\\n\")), mdx(\"h2\", null, \"Passing arguments through cli\"), mdx(\"p\", null, \"Sometimes, there are cases where some arguments are required to be chosen at time of commencing the task. It is a desirable feature to choose those arguments at the time of running the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"do\"), \" command.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Example\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yaml\"\n  }), \"build:\\n  - name: make\\n    image: java\\n    commands:\\n      - [\\\"make\\\", \\\"-j$1\\\"]\\n\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"$ dunner do build 8\\n\")), mdx(\"h2\", null, \"Use a task as a step for another task\"), mdx(\"p\", null, \"There might be some incidents where a task is required to be run as a part of another task as some step. Dunner supports configuring the task file, i.e. the default \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".dunner.yaml\"), \", such that another task can be subsequently followed in a step of the original task.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Example\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yaml\"\n  }), \"install:\\n  - follow: build\\n    args:\\n    - 8\\nbuild:\\n  - name: make\\n    image: java\\n    commands:\\n      - [\\\"make\\\", \\\"-j$1\\\"]\\n\")), mdx(\"h2\", null, \"Validating the dunner file\"), mdx(\"p\", null, \"It is always convenient to have a validation check of the dunner file before executing the commands. While writing the dunner file, an user can validate the file for any syntax errors that might be fail the execution of the task. Use the following command on the CLI to validate the dunner file (default \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"dunner.yaml\"), \").\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"$ dunner validate\\n\")), mdx(\"hr\", null), mdx(\"h1\", null, \"Advanced Usage\"), mdx(\"h2\", null, \"Dotenv file\"), mdx(\"p\", null, \"Dunner has the facility to define certain environment variables in a separate environment file. This enables users to keep certain secrets like API keys, access tokens, passwords, etc. outside of the dunner file. Also, it can serve as a constants file too, making it a little less messier to change some parameters of the commands that are to be run through the dunner file. Dunner reads the filename (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".env\"), \") by default, but a custom environment file with a different name can be chosen with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"--env-file\"), \" flag. These variables can be invoked as explained \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"#exporting-environment-variables\"\n  }), \"here\"), \".\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Example of an environment file\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yaml\"\n  }), \"# .env\\nAWS_KEY='<YOUR_AWS_API_KEY>'\\nFIREBASE_KEY='<YOUR_FIREBASE_API_KEY>'\\nSSH_KEY_GITLAB='<YOUR_GITLAB_SSH_KEY>'\\n\")), mdx(\"h2\", null, \"Asynchronous mode\"), mdx(\"p\", null, \"Concurrent execution of steps of task is quite a useful feature to reduce the total execution time, provided that there is no sharing of resources simultaneously among all the steps. This can be triggered with the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"--async\"), \"/\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"-A\"), \" flag in the command line.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"$ dunner do --async build\\n\")), mdx(\"h2\", null, \"Dry-run\"), mdx(\"p\", null, \"This mode executes all the functions normally, except for the final execution of commands. Those functions include parsing the YML file, validating the syntax, connecting with Docker Hub and pulling docker images if required, building the containers and attaching the volumes. Thus, it can be checked that everything will work fine provided that the commands are correct. To execute a dry-run, use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"--dry-run\"), \" flag as follows,\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"$ dunner do --dry-run build\\n\")), mdx(\"h2\", null, \"Verbose mode\"), mdx(\"p\", null, \"Verbose mode provides more information on the terminal screen about what is going on during the execution. To enable a verbose output, use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"--verbose\"), \"/\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"-v\"), \" flag as follows,\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"$ dunner do --verbose build\\n\")));\n}\n;\nMDXContent.isMDXComponent = true;"},"tableOfContents":{"items":[{"url":"#getting-started","title":"Getting started"},{"url":"#how-to-write-a-dunner-file","title":"How to write a Dunner file","items":[{"url":"#step-fields-reference","title":"Step Fields Reference"},{"url":"#multiple-commands","title":"Multiple commands"},{"url":"#mounting-external-directories","title":"Mounting external directories"},{"url":"#exporting-environment-variables","title":"Exporting environment variables"},{"url":"#passing-arguments-through-cli","title":"Passing arguments through cli"},{"url":"#use-a-task-as-a-step-for-another-task","title":"Use a task as a step for another task"},{"url":"#validating-the-dunner-file","title":"Validating the dunner file"}]},{"url":"#advanced-usage","title":"Advanced Usage","items":[{"url":"#dotenv-file","title":"Dotenv file"},{"url":"#asynchronous-mode","title":"Asynchronous mode"},{"url":"#dry-run","title":"Dry-run"},{"url":"#verbose-mode","title":"Verbose mode"}]}]},"parent":{"__typename":"File","relativePath":"docs/dunner.wiki/User-Guide.md"},"frontmatter":{"metaTitle":null,"metaDescription":null}},"allMdx":{"edges":[{"node":{"fields":{"slug":"/docs","title":"Documentation"}}},{"node":{"fields":{"slug":"/","title":"Dunner"}}},{"node":{"fields":{"slug":"/docs/dunner.wiki/developer-guide","title":"Developer Guide"}}},{"node":{"fields":{"slug":"/docs/dunner.wiki/home","title":"Home"}}},{"node":{"fields":{"slug":"/docs/dunner.wiki/installation-guide","title":"Installation Guide"}}},{"node":{"fields":{"slug":"/docs/dunner.wiki/introduction-to-dunner","title":"Introduction To Dunner"}}},{"node":{"fields":{"slug":"/docs/dunner.wiki/user-guide","title":"User Guide"}}}]}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"2b5c59d5-c910-5422-902d-77b58c6b0198"}}